# 1.DP

## 1.1递推

要想理解DP，首先要理解***<u>递推</u>***。

***<u>递推是一种用若干步可重复的简单运算来描述复杂问题的方法</u>***。递推的特点在于，==每一项都和他前面的若干项有一定关联==。可以通过前面的若干项得出此项的数据。这种关系一般可以通过***<u>递推关系式来</u>***表示。

对于递推问题的求解一般从初始的一个或若干个数据项出发，通过递推关系式逐步推进，从而得出想要的结果，这种求解问题的方法叫递推法。

其中，初始的若干数据项称为边界。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                



### 例题(来自计蒜客)

#### 小兔兔问题

![img](https://wx4.sinaimg.cn/mw690/005LasY6gy1gdq7ujqz66j31kw0u0aid.jpg)

![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1gdq7v8jjx6j31o40bmju0.jpg)



#### 信封问题

![img](https://wx3.sinaimg.cn/mw690/005LasY6gy1gdq7w44sqjj31ri09ktbp.jpg)

![img](https://wx2.sinaimg.cn/mw690/005LasY6gy1gdq7wk129gj31qy0qcqbp.jpg)

![img](https://wx2.sinaimg.cn/mw690/005LasY6gy1gdq7wy1yz4j31qq0d6acy.jpg)



#### 二维递推

![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1gdq7za97yqj31rm0taai9.jpg)

![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1gdq81qrrbij31qs0sogu0.jpg)

![img](https://wx4.sinaimg.cn/mw690/005LasY6gy1gdq8c4hau8j31qi0t6n65.jpg)



还有经典的马踏过河卒、杨辉三角、环形墙壁涂色问题，见计蒜客！(代码见此目录)



### 递推总结(hug)

思路

1. 定义状态(语音信息)，==这是最重要的！！状态不同方程就不同！==(菜鸟凭套路，高手凭直觉)

2. 确定递推方程

3. 程序实现

   + 正向递推

     即方程咋写的就咋实现，一般用递归 + 记忆化实现

   + 逆向递推

     for循环(要给出边界)



#### 递归程序套路

1. 给递归程序一个明确的语义信息
2. 设定边界条件
3. 设计递归过程和处理过程
4. 设计返回值

## 1.2dp入门

### 历史

动态规划是编程解题的一种重要手段。

1951年美国数学家`R.Bellman`等人，根据一类多阶段问题的特点，把多阶段决策问题转化为一系列==相互联系==的单阶段问题，然后逐个加以解决。

与此同时，他提出了解决这类问题的”最优化原理“，从而创建了解决最优化问题的一种新方法：动态规划！



### 基本概念

1. 阶段(==说实话不太懂阶段和状态的区别==)
   + 把所给问题的求解过程恰当地分成若干个相互联系的阶段，以便于求解。
   + 过程不同，阶段数就可能不同。
   + 描述阶段的变量称为阶段变量常用k表示。
   + 阶段的划分，一般是根据时间和空间的自然特征来划分，但要便于把问题的过程转化为多阶段决策的过程。
2. 状态
   + 状态表示每个阶段开始面临的自然状况或客观条件，它不以人们的主观意志为转移，也称为不可控因素。
   + 通常一个阶段有若干个状态，状态通常可以用一个或一组数来描述，称为状态变量。
3. 决策
   + 表示当过程处于某一阶段的某个状态时，可以做出不同的决定，从而确定下一阶段的状态，这种决定称为决策。
   + 不同的决策对应着不同的数值，描述决策的变量称为决策变量。
4. ==状态转移方程==
   + dp中本阶段的状态往往是上一阶段的状态和上一阶段的决策的结果，由第i个阶段的状态f(i)和决策u(i)来确定第i+1个阶段的状态。
   + 状态转移表示为F(i + 1) = T(f(i), u(i))，称为状态转移方程。
5. 策略
   + 各个阶段决策确定后，整个问题的决策序列就构成了一个策略。
   + 对于每个实际问题，可供选择的策略有一定范围，称为允许策略集合。允许策略集合中达到最优效果的策略称为最优策略。



### 必须满足的条件

dp必须满足最优化原理与无后效性。

1. 最优化原理

   ”一个过程的最优决策具有这样的性质：即无论其初始状态和初始决策如何，其今后各个策略对第一个决策所形成的的状态作为初始状态的过程而言，必须构成最优策略“

   (==没看懂。。。==)

   也就是说一个最优策略的子策略，也是最优的。

2. 无后效性

   如果某阶段状态给定后，则在这个阶段以后过程的发展不受这个阶段以前各个状态的影响。



### 一个小例子

![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1gdtmmfy5pvj31er0u07f1.jpg)

![img](https://wx1.sinaimg.cn/mw690/005LasY6gy1gdtmnz1rzzj31r00pgdlx.jpg)



### dp总结(hug)

1. dp问题是运筹学的一部分，也是递推问题的子集(特例)。

   区别在于：递推问题重在求解一个答案，而dp问题想要的是最优解

2. 求解思路和递推相同

3. 重点

   + 定义状态
   + 划分阶段

4. 性质

   + 当前解可以由上一个阶段的解推出，由此，可以把问题简化成一个更小的子问题，而子问题具有相同的求解方式，只不过规模更小了而已。



### 经典引例--钱币问题

![img](https://wx3.sinaimg.cn/mw690/005LasY6gy1gdtp54sdbsj31n40rg1kx.jpg)



1. 定义状态

   + 最简单的能想到的就是f(n)，表示拼凑n便士的方法总数

   + 但是这个状态会和前面的状态产生怎样的关系呢？

     是说不清楚的，***<u>因为还有一个最重要的量，你没有在状态f(n)中表现出来！----多少种钱币</u>***

   + 若考虑到多少种钱币，那么就可定义出新的状态

     ***<u>f(k, n)--用前k种钱币拼凑出n便士的方法总数</u>***

     (前k种，并不意味着前k种钱币一定都要用上！)

   + 由这个状态可以得到，f(k - 1, n)是f(k, n)的一个子集

2. 确定递推方程

   `f(k, n) = f(k - 1, n) + f(k, n - w(k))`

   其中，前者表示*<u>**一定没用到第k种钱币的方法总数**</u>*，后者表示***<u>一定用到了第k中钱币的方法总数(w(k)表示第k种钱币的面值)</u>***，两者没有交集！

3. 程序实现

   + 正向递推

     递归+ 记忆化

   + 逆向递推

     边界条件：`f(1, n) = 1     f(k, 0) = 1 `   

> 代码实现请去Project-Euler目录里找第31题！